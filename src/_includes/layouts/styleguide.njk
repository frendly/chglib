<!DOCTYPE html>
<html lang="ru">
<head>
  <title>Гайд стилей | {{ meta.siteName }}</title>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Гайд стилей для сайта {{ meta.siteName }}">

  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  {% include "components/critical_css.njk" %}

  <link rel="icon" type="image/png" href="{{ '/favicon.ico' | url }}">
  <link rel="stylesheet" href="/assets/styles/index.css?v={% version %}">
  <style>
.styleguide-section {
  margin-bottom: 3rem;
  padding-bottom: 2rem;
  border-bottom: 2px solid #ddd;
}

.styleguide-section:last-child {
  border-bottom: none;
}

.styleguide-example {
  background: #fff;
  border: 1px solid #ddd;
  border-radius: 0.25rem;
  padding: 1.5rem;
  margin: 1rem 0;
}

.styleguide-code {
  background: #f5f5f5;
  border: 1px solid #ddd;
  border-radius: 0.25rem;
  padding: 1rem;
  overflow-x: auto;
  margin: 1rem 0;
}

.styleguide-code pre {
  margin: 0;
  font-family: 'Courier New', monospace;
  font-size: 0.875rem;
  line-height: 1.5;
}

.color-palette {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
  margin: 1rem 0;
}

.color-swatch {
  border: 1px solid #ddd;
  border-radius: 0.25rem;
  overflow: hidden;
}

.color-swatch__color {
  height: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.color-swatch__info {
  padding: 0.75rem;
  background: #fff;
  font-size: 0.875rem;
}

.color-swatch__name {
  font-weight: 600;
  margin-bottom: 0.25rem;
}

.color-swatch__value {
  color: #666;
  font-family: 'Courier New', monospace;
}

.color-swatch__description {
  color: #666;
  font-size: 0.8125rem;
  line-height: 1.4;
  margin-top: 0.5rem;
  font-style: italic;
}

.color-link {
  background-color: #0060a0;
}

.color-link-visited {
  background-color: #70a0b0;
}

.color-hover {
  background-color: #b03000;
}

.color-bg {
  background-color: #f5f5f5;
  color: #333;
}

.color-border {
  background-color: #ddd;
  color: #333;
}

.table-demo th,
.table-demo td {
  border: 1px solid #ddd;
  padding: 0.5rem;
  text-align: left;
}

.link-visited-demo {
  color: #70a0b0;
  border-bottom-color: rgba(112, 160, 176, 0.15);
}

.link-hover-demo {
  color: #b03000;
  border-bottom-color: rgba(176, 48, 0, 0.15);
}

details {
  margin: 1rem 0;
}

details summary {
  cursor: pointer;
  padding: 0.5rem 1rem;
  background: #f5f5f5;
  border: 1px solid #ddd;
  border-radius: 0.25rem;
  font-size: 0.875rem;
  font-weight: 500;
  user-select: none;
  transition: background-color 0.2s ease;
}

details summary:hover {
  background: #e9e9e9;
}

details summary {
  list-style: none;
}

details summary::-webkit-details-marker {
  display: none;
}

details summary::marker {
  display: none;
}

details summary::before {
  content: "▶ ";
  display: inline-block;
  margin-right: 0.5rem;
  transition: transform 0.2s ease;
}

details[open] summary::before {
  transform: rotate(90deg);
}

details .styleguide-code {
  margin-top: 0.5rem;
}

.styleguide-legend {
  position: fixed;
  top: 50%;
  right: 2rem;
  transform: translateY(-50%);
  background: #fff;
  border: 1px solid #ddd;
  border-radius: 0.25rem;
  padding: 1rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  max-width: 200px;
  max-height: 80vh;
  overflow-y: auto;
  z-index: 1000;
  font-size: 0.875rem;
}

.styleguide-legend__title {
  font-weight: 600;
  margin-bottom: 0.75rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid #ddd;
  font-size: 0.875rem;
}

.styleguide-legend__list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.styleguide-legend__item {
  margin-bottom: 0.5rem;
}

.styleguide-legend__link {
  color: #0060a0;
  text-decoration: none;
  display: block;
  padding: 0.25rem 0;
  transition: color 0.2s ease;
  line-height: 1.4;
}

.styleguide-legend__link:hover {
  color: #b03000;
  text-decoration: underline;
}

.styleguide-legend__link.active {
  color: #b03000;
}

@media (max-width: 1024px) {
  .styleguide-legend {
    display: none;
  }
}

.styleguide-section {
  scroll-margin-top: 2rem;
}
  </style>
</head>
<body class="new-body">
  <nav class="styleguide-legend" aria-label="Навигация по разделам">
    <div class="styleguide-legend__title">Разделы</div>
    <ul class="styleguide-legend__list">
      <li class="styleguide-legend__item">
        <a href="#basics" class="styleguide-legend__link">Базовые элементы</a>
      </li>
      <li class="styleguide-legend__item">
        <a href="#colors" class="styleguide-legend__link">Цветовая палитра</a>
      </li>
      <li class="styleguide-legend__item">
        <a href="#components" class="styleguide-legend__link">Компоненты</a>
      </li>
      <li class="styleguide-legend__item">
        <a href="#forms" class="styleguide-legend__link">Формы</a>
      </li>
      <li class="styleguide-legend__item">
        <a href="#modals" class="styleguide-legend__link">Модальные окна</a>
      </li>
      <li class="styleguide-legend__item">
        <a href="#navigation" class="styleguide-legend__link">Навигация</a>
      </li>
      <li class="styleguide-legend__item">
        <a href="#tables" class="styleguide-legend__link">Таблицы</a>
      </li>
    </ul>
  </nav>
  <main style="max-width: 1200px; margin: 0 auto; padding: 2rem;">
    <h1>Гайд стилей</h1>
    {% block content %}
      {{ content | safe }}
    {% endblock %}
  </main>
  <script>
    (function() {
      const legendLinks = document.querySelectorAll('.styleguide-legend__link');
      const sections = document.querySelectorAll('.styleguide-section');
      
      // Плавная прокрутка
      legendLinks.forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          const targetId = this.getAttribute('href').substring(1);
          const targetSection = document.getElementById(targetId);
          if (targetSection) {
            targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        });
      });
      
      // Подсветка активного раздела при прокрутке
      function updateActiveSection() {
        let current = '';
        const scrollPosition = window.scrollY + 200; // offset для лучшей видимости
        
        sections.forEach(section => {
          const sectionTop = section.offsetTop;
          const sectionHeight = section.offsetHeight;
          
          if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
            current = section.getAttribute('id');
          }
        });
        
        legendLinks.forEach(link => {
          link.classList.remove('active');
          if (link.getAttribute('href') === '#' + current) {
            link.classList.add('active');
          }
        });
      }
      
      window.addEventListener('scroll', updateActiveSection);
      updateActiveSection(); // Инициализация при загрузке
    })();
  </script>
</body>
</html>
