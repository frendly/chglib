# Совместимость с Apache 2.4+ (Require all granted) и Apache 2.2 (Allow from all)
<IfModule mod_authz_core.c>
    Require all granted
</IfModule>
<IfModule !mod_authz_core.c>
    Order Allow,Deny
    Allow from all
</IfModule>

Options +FollowSymLinks
RewriteEngine On
RewriteBase /

# Редирект с HTTP на HTTPS (должен быть первым)
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Редирект index.html на корень
RewriteRule ^index\.html$ / [NC,R=301,L]

# Редиректы BNP (объединены в паттерны)
RewriteRule ^bncpost\.html$ /BNP/ [R=301,L]
RewriteRule ^bnp(201[2-8])\.html$ /BNP/$1/ [R=301,L]

# Редиректы старых главных страниц (объединены в паттерны)
# lib0.html, lib1.html, ..., lib11.html
RewriteRule ^lib([0-9]|1[0-1])\.html$ / [R=301,L]
# lib_ny.html, lib_ny1.html, lib_ny2.html, lib_ny2015.html, lib_ny2017.html, lib_nyold.html
RewriteRule ^lib_ny([0-9]*|old)\.html$ / [R=301,L]
# lib_oy.html, lib_oy2016.html
RewriteRule ^lib_oy([0-9]*)?\.html$ / [R=301,L]
# lib0_e.html, lib1_e.html, ..., lib9_e.html
RewriteRule ^lib([0-9])_e\.html$ / [R=301,L]
# lib1_23.html, lib2_0.html, lib2_8.html, lib4_9.html, lib4_27.html
RewriteRule ^lib([0-9])_([0-9]+)\.html$ / [R=301,L]
# lib53.html, lib55.html, lib57.html, lib59.html, lib511.html, lib513.html, ..., lib529.html
RewriteRule ^lib5(3|5|7|9|1[1-9]|2[1-9])\.html$ / [R=301,L]

# Редиректы основных разделов
RewriteRule ^elcat\.html$ /ec/ [R=301,L]
RewriteRule ^BENex\.html$ /BENex/ [R=301,L]
RewriteRule ^onas\.html$ /about/ [R=301,L]
RewriteRule ^adres\.html$ /contacts/ [R=301,L]
RewriteRule ^subjex\.html$ /subjex/ [R=301,L]
RewriteRule ^news\.html$ /news/ [R=301,L]
RewriteRule ^libweb\.html$ /libweb/ [R=301,L]

# Редиректы подстраниц subjex (объединены в паттерн)
# subjex/2008/subjex.html, ..., subjex/2017/subjex.html
RewriteRule ^subjex/(20(0[8-9]|1[0-7]))/subjex\.html$ /subjex/$1/ [R=301,L]

# Редиректы новостей по годам (объединены в паттерн)
# more/news2008.html, ..., more/news2020.html
RewriteRule ^more/news(20(0[8-9]|1[0-9]|20))\.html$ /news/$1/ [R=301,L]

# Редиректы веб-библиотеки (libweb)
RewriteRule ^e-jour\.html$ /libweb/e-jour.html [R=301,L]
RewriteRule ^ResBNC\.html$ /libweb/ResBNC.html [R=301,L]
RewriteRule ^libweb/ResBNC\.html$ /libweb/resbnc/ [R=301,L]
RewriteRule ^Restmp\.html$ /libweb/Restmp.html [R=301,L]
RewriteRule ^science\.html$ /libweb/science.html [R=301,L]
